@using WebOsadnici.Models.HerniTridy
@{
    ViewData["Title"] = "Pruběh hry";
}
<script>
    // Počkat na načtení celé stránky
    window.addEventListener('load', function () {
        // Počkat ještě krátkou dobu, než se skryje zpráva o načítání (např. 1 sekunda)
        setTimeout(function () {
            // Skrýt zprávu o načítání a zobrazit obsah stránky
            document.getElementById('loading-message').style.display = 'none';
            document.getElementById('main-container').style.display = 'flex';
        }, 1000); // 1000 ms = 1 sekunda
    });
</script>
<span id="id-hry" hidden>@ViewBag.hra.Id</span>
<span id="id-hrace" hidden>@ViewBag.hrac.Id</span>
<p id="loading-message">Vykreslování... Prosím čekejte.</p>
<div id="main-container" style="display: none;">
    
    <div class="ovladaci_panel" id="tlacitkovy-panel">
        <div>
            <h2>Instrukce</h2>
            <span id="instrukce">
                @ViewBag.hra.DejInstrukci(ViewBag.hrac.Id)
            </span>
        </div>
        <div>
            <h2>Nákup</h2>
            <span id="nakup">
                @Html.Raw(ViewBag.hra.DejNakupHTML(ViewBag.hrac))
            </span>
        </div>
        <div>
            <h2>Akční karty</h2>
            <span id="akcni-karty" class="horizontalne">
                @Html.Raw(ViewBag.hra.DejAkcniKartyHTML(ViewBag.hrac))
            </span>
        </div>
        <div id="panel_tlacitka">
            @if (ViewBag.hra.stavHry != StavHry.Nezacala)
            {
                if (ViewBag.hra.AktualniHrac() == ViewBag.Hrac)
                {
                    <button id="tlacitko_smena">Nabídnout směnu</button>
                    <button id="tlacitko_dalsi">Ukončit tah</button>
                }
                else
                {
                    <button id="tlacitko_smena" disabled>Nabídnout směnu</button>
                    <button id="tlacitko_dalsi" disabled>Ukončit tah</button>
                }
                
            }
            else
            {
                <button id="tlacitko_smena" disabled>Nabídnout směnu</button>
                if (ViewBag.hra.hraci.Count > 1 && ViewBag.hrac == ViewBag.hra.hraci[0])
                {
                    <button id="tlacitko_dalsi">Začít hru</button>
                }
                else
                {
                    <button id="tlacitko_dalsi" disabled>Začít hru</button>
                }
            }
        </div>
        

    </div>
    <div id="map-container" style="width: @(Mapka.RozmeryMrizky.Width*@Pole.Velikost.Width*6)px">
        <partial name="Mapka" />
    </div>
    <div class="ovladaci_panel" id="stavovy-panel">

        <div>
            <h2>Body hráčů</h2>
            <span id="Body" class="horizontalne">
                @Html.Raw(@ViewBag.hra.DejBodyHTML())
            </span>
        </div>
        <div>
            <h2>Extra body</h2>
            <span id="BodoveKarty" class="horizontalne">
                @Html.Raw(@ViewBag.hra.DejBodoveKartyHTML(ViewBag.hrac))
            </span>
        </div>
        <div>
            <h2>Suroviny</h2>
            <span id="Suroviny" class="horizontalne">
                @Html.Raw(@ViewBag.hra.DejSurovinoveKartyHTML(ViewBag.hrac))
            </span>
        </div>
        <div id="panel_smeny">
            <h2>Nabízené směny</h2>
            <span id="Smeny" class="vertikalne">
                @Html.Raw(@ViewBag.hra.DejSmenyHTML(ViewBag.hrac))
            </span>
        </div>
    </div>
</div>
<script src="~/js/signalr/dist/browser/signalr.js"></script>
<script src="~/js/click.js"></script>